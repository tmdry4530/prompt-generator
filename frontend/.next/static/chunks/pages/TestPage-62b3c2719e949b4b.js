(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{6393:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/TestPage",function(){return r(8372)}])},8372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var s=r(3798),a=r(1462),n=r(1623),i=r(2074);function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:d("bg-white text-zinc-950 flex flex-col gap-6 rounded-xl border border-zinc-200 py-6 shadow-sm dark:bg-zinc-950 dark:text-zinc-50 dark:border-zinc-800",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:d("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:d("leading-none font-semibold",t),...r})}function h(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:d("text-zinc-500 text-sm dark:text-zinc-400",t),...r})}function u(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:d("px-6",t),...r})}var x=r(2696);let m=(0,r(6783).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-zinc-950 focus-visible:ring-zinc-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-zinc-300 dark:focus-visible:ring-zinc-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 shadow-xs hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-zinc-100 hover:text-zinc-900 dark:bg-zinc-200/30 dark:border-zinc-200 dark:hover:bg-zinc-200/50 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:bg-zinc-800/30 dark:dark:border-zinc-800 dark:dark:hover:bg-zinc-800/50",secondary:"bg-zinc-100 text-zinc-900 shadow-xs hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-100/50 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:hover:bg-zinc-800/50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function g(e){let{className:t,variant:r,size:a,asChild:n=!1,...i}=e,c=n?x.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:d(m({variant:r,size:a,className:t})),...i})}var p=r(9100),v=r(3054),f=r(4215);let b=(()=>{if(f.env.NEXT_PUBLIC_API_URL)return f.env.NEXT_PUBLIC_API_URL;{let e=window.location.protocol,t=window.location.hostname;return"".concat(e,"//").concat(t,"/api")}})(),w=v.A.create({baseURL:b,headers:{"Content-Type":"application/json"},withCredentials:!1,timeout:1e4});w.interceptors.request.use(e=>{var t;return console.log("\uD83D\uDE80 API 요청: ".concat(null==(t=e.method)?void 0:t.toUpperCase()," ").concat(e.url)),e},e=>(console.error("❌ API 요청 오류:",e),Promise.reject(e))),w.interceptors.response.use(e=>(console.log("✅ API 응답: ".concat(e.status," ").concat(e.config.url)),e),e=>{var t;return console.error("❌ API 응답 오류:",null==(t=e.response)?void 0:t.status,e.message),Promise.reject(e)});var j=r(8681);let k=e=>{if(e instanceof j.pe)if(e.response){let t=e.response.data;return t&&t.error?t.error:"서버 오류 (".concat(e.response.status,"): ").concat(e.response.statusText)}else if(e.request)return"서버에 연결할 수 없습니다. 네트워크 연결을 확인하세요.";else return"요청 오류: ".concat(e.message);return e instanceof Error?e.message:"string"==typeof e?e:"알 수 없는 오류가 발생했습니다."},z=(e,t)=>{let r=new Date().toISOString(),s=k(e);console.error("[".concat(r,"]").concat(t?" [".concat(t,"]"):""," 오류: ").concat(s))},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;try{return await e()}catch(s){if(t<=0)throw s;return await new Promise(e=>setTimeout(e,r)),y(e,t-1,2*r)}},N=async(e,t)=>{let r=performance.now(),s=!1,a="";try{await t(),s=!0,a="테스트 성공"}catch(t){s=!1,a=t instanceof Error?t.message:"알 수 없는 오류",z(t,"테스트: ".concat(e))}return{name:e,success:s,message:a,duration:performance.now()-r}},_=async()=>N("API 연결 테스트",async()=>{if(!await w.checkHealth())throw Error("API 서버에 연결할 수 없습니다.")}),T=async()=>N("모델 목록 가져오기 테스트",async()=>{let e=await w.getModels();if(!e||0===e.length)throw Error("모델 목록을 가져오는 데 실패했습니다.")}),E=async(e,t)=>N("프롬프트 최적화 테스트",async()=>{let r=await w.optimizePrompt(e,t);if(!r.success)throw Error(r.error||"프롬프트 최적화에 실패했습니다.");if(!r.optimized_prompt||0===r.optimized_prompt.trim().length)throw Error("최적화된 프롬프트가 비어 있습니다.")}),S=async e=>N("모델 팁 가져오기 테스트",async()=>{let t=await w.getModelTips(e);if(!t||0===t.length)throw Error("모델 팁을 가져오는 데 실패했습니다.")}),A=async e=>N("모델 구조 가져오기 테스트",async()=>{let t=await w.getModelStructure(e);if(!t||0===Object.keys(t).length)throw Error("모델 구조를 가져오는 데 실패했습니다.")}),I=async e=>N("모델 정보 가져오기 테스트",async()=>{let t=await w.getModelInfo(e);if(!t||0===Object.keys(t).length)throw Error("모델 정보를 가져오는 데 실패했습니다.")}),P=async e=>N("모델 비교 테스트",async()=>{let t=await w.compareModels(e);if(!t||0===Object.keys(t).length)throw Error("모델 비교에 실패했습니다.")}),O=async()=>N("프롬프트 저장 테스트",async()=>{let e={id:Date.now(),timestamp:new Date().toISOString(),modelId:"test-model",modelName:"Test Model",originalInput:"Test input",optimizedPrompt:"Test optimized prompt"};if(!w.savePrompt(e))throw Error("프롬프트 저장에 실패했습니다.");if(!w.getSavedPrompts().some(t=>t.id===e.id))throw Error("저장된 프롬프트를 찾을 수 없습니다.");w.deleteSavedPrompt(e.id)}),D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"산 위에서 일출을 바라보는 사람의 실루엣",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gpt-4o",r=[];r.push(await _());let s=await T();if(r.push(s),s.success){r.push(await E(e,t)),r.push(await S(t)),r.push(await A(t)),r.push(await I(t));let s=await w.getModels();if(s.length>=2){let e=s.slice(0,2).map(e=>e.model_id);r.push(await P(e))}}return r.push(await O()),r},M=e=>{let t=e.length,r=e.filter(e=>e.success).length;return{total:t,passed:r,failed:t-r,passRate:r/t*100,failedTests:e.filter(e=>!e.success).map(e=>"".concat(e.name,": ").concat(e.message))}},C=0,U=new Map,R=e=>{if(U.has(e))return;let t=setTimeout(()=>{U.delete(e),V({type:"REMOVE_TOAST",toastId:e})},1e6);U.set(e,t)},L=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?R(r):e.toasts.forEach(e=>{R(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},X=[],F={toasts:[]};function V(e){F=L(F,e),X.forEach(e=>{e(F)})}function q(e){let{...t}=e,r=(C=(C+1)%Number.MAX_VALUE).toString(),s=()=>V({type:"DISMISS_TOAST",toastId:r});return V({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>V({type:"UPDATE_TOAST",toast:{...e,id:r}})}}let B=()=>{let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1),{toast:x}=function(){let[e,t]=a.useState(F);return a.useEffect(()=>(X.push(t),()=>{let e=X.indexOf(t);e>-1&&X.splice(e,1)}),[e]),{...e,toast:q,dismiss:e=>V({type:"DISMISS_TOAST",toastId:e})}}(),m=async()=>{d(!0),t([]),n(null);try{let e=await D();t(e);let r=M(e);n(r),0===r.failed?x("모든 테스트가 성공적으로 완료되었습니다."):x("".concat(r.failed,"개의 테스트가 실패했습니다."),{variant:"destructive"})}catch(e){console.error("테스트 오류:",e),x("테스트 실행 중 오류가 발생했습니다.",{variant:"destructive"})}finally{d(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,s.jsxs)("header",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"통합 테스트 및 품질 검증"}),(0,s.jsx)("p",{className:"text-gray-600",children:"AI 프롬프트 최적화 웹 도구의 모든 기능을 테스트하고 품질을 검증합니다"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,s.jsxs)(c,{children:[(0,s.jsxs)(o,{children:[(0,s.jsx)(l,{children:"테스트 실행"}),(0,s.jsx)(h,{children:"모든 기능에 대한 통합 테스트를 실행합니다"})]}),(0,s.jsx)(u,{children:(0,s.jsx)(g,{onClick:m,disabled:i,className:"w-full",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"테스트 실행 중..."]}):"모든 테스트 실행"})})]}),r&&(0,s.jsxs)(c,{children:[(0,s.jsxs)(o,{children:[(0,s.jsx)(l,{children:"테스트 요약"}),(0,s.jsx)(h,{children:"테스트 결과 요약 정보"})]}),(0,s.jsxs)(u,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-md text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:r.total}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"전체 테스트"})]}),(0,s.jsxs)("div",{className:"bg-green-100 p-4 rounded-md text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-700",children:r.passed}),(0,s.jsx)("div",{className:"text-sm text-green-700",children:"성공"})]}),(0,s.jsxs)("div",{className:"bg-red-100 p-4 rounded-md text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-700",children:r.failed}),(0,s.jsx)("div",{className:"text-sm text-red-700",children:"실패"})]}),(0,s.jsxs)("div",{className:"bg-blue-100 p-4 rounded-md text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:[r.passRate.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"성공률"})]})]}),r.failed>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"실패한 테스트"}),(0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-red-700",children:r.failedTests.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]})]})]}),e.length>0&&(0,s.jsxs)(c,{children:[(0,s.jsxs)(o,{children:[(0,s.jsx)(l,{children:"상세 테스트 결과"}),(0,s.jsx)(h,{children:"각 테스트의 상세 결과"})]}),(0,s.jsx)(u,{children:(0,s.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,s.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)("div",{className:"p-4 ".concat(e.success?"bg-green-50":"bg-red-50"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-medium ".concat(e.success?"text-green-700":"text-red-700"),children:e.name}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.success?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),children:e.success?"성공":"실패"})]}),(0,s.jsx)("p",{className:"text-sm mt-2",children:e.message}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["실행 시간: ",e.duration.toFixed(2),"ms"]})]})},t))})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[630,636,593,792],()=>t(6393)),_N_E=e.O()}]);